# Java概述

## **介绍**

- 半编译半解释
  - 编译器**javac**将代码**编译**为.class文件/字节码，由JVM**解释**执行
  - JIT编译器保存常用字节码的**机器码**提高效率
  - 其他编译型语言将代码编译成**机器码**执行，不同CPU指令集对应不同机器码，而Java针对不同平台编写**虚拟机**
  - 硬件对于机器码也是解释执行的，因此所有语言最终都是解释执行的；而编译的本质是将高级语言转换为低级语言，javac的功能就已经满足了这一特性，还是倾向于说Java是门**编译型语言** [Ref](https://www.zhihu.com/question/19608553/answer/14702010)

## **缩写**

![img](https://img2018.cnblogs.com/blog/1362965/201901/1362965-20190114161305916-1522316322.png)

- JVM：Java虚拟机，包含运行时基本类库rt.jar，可理解为Java源码的jar包
- JRE：Java**运行**环境，只能运行不能开发，提供解释时调用的核心类库，**JVM/bin+lib=JRE**
- JDK：Java SE Development Kit，Java标准开发包，包括**编译和运行**所需的工具与资源

## **Java特点**

- 面向对象(封装+继承+多态)，但无多继承(接口可以多继承)、指针、内存管理等
- 简单、各种框架
- 平台无关
- 支持多线程
- 网络编程方便



# IDEA

## 快捷键

- | 快捷键位         | 功能                          |
  | ---------------- | ----------------------------- |
  | `Alt+Enter`      | 导入需要的包/自动生成局部变量 |
  | `Ctrl+Y/D`       | 删除所在行/添加               |
  | `Ctrl+Alt+L`     | 格式化                        |
  | `Ctrl+Alt+T`     | 加try catch等                 |
  | `Ctrl+/`         | 单行注释                      |
  | `Ctrl+Shift+/`   | 多行注释                      |
  | `Alt+Ins`        | 自动生成代码                  |
  | `Alt+Shift+箭头` | 移动代码                      |
  | `Shift+F6`       | 统一重命名                    |
  | `!+Tab`          | 在jsp文件中自动生成头部信息   |



# 基本语法

## **数据类型**

- 四类八种，存储大小不随硬件架构变化而变化，更具可移植性

<img src="C:\Users\91494\AppData\Roaming\Typora\typora-user-images\image-20211205220629256.png" alt="image-20211205220629256" style="zoom: 50%;" />

- char占2字节是因为采用了**UTF-16**标准
- GBK中文2字节英文1字节，UTF-8中文3字节英文1字节，UTF-16中英文2字节
- Java不能隐式向下转型，会使得精度降低
- BigDecimal类能保证**小数精度不丢失**
- boolean的具体大小没有明确规定，JVM在编译期将其转换为int，boolean数组通过byte数组实现
- 除float和double之外都实现了一定范围的**常量池技术**，除非**new**不然都是从池中取，**valueOf()**就是使用池
- 编译器在自动装箱时会调用valueOf()，因此相同的实例会引用**同一个对象**
- i4、i5、i6均为new的Integer对象，分别为40，40和0，问i4==i5+i6？
  - ture，因为+操作符使得i5和i6得先拆箱，i4==40，而Integer不能与int比较，i4拆箱，最终为40\==40


## 数据定义

- 加上`final`修饰符表示**常量**，指向**位置不变**

- `var`关键字用来**省略类名**

- **整数运算永远是精确的**，因为只存储整数部分，而浮点数由于二进制表示问题无法精确

- **空字符串""和null不同**，null没有指向任何内存空间

- 对于引用类型而言，==是判断是否**指向同个对象**，即地址是否相同，要想判断内容相等得用重写过的**equals()**，且equals()不能用于基本类型

  - 重写**equal()**必须重写**hashCode()**：根据hashcode值加入HashSet，如果没有相等的code值则认为没出现过，如果有相同的code则调用**equal()**判断是否相同，且如果相等code一定相同，而code相同不一定相等，因此必须重写

  > java中只有==值传递==，即操作==拷贝==，所以都是比较值，但是引用类型的值为地址

- 字符型常量与字符串常量区别

  1. ''和""
  2. 存放ASCII值和地址值
  3. 2个字节和多个字节(没有'\0')

## 数组

- 几种创建方式

  ```java
  // 1.先声明再分配空间最后赋值
  int[] arr;
  arr = new int[5];
  arr = {1,2,3,4,5};
  
  // 2.声明并分配空间，再赋值
  int[] arr = new int[5];
  arr = {1,2,3,4,5};
  
  // 3.声明分配赋值同时进行
  int[] arr = new int[]{1,2,3,4,5};
  int[] arr = {1,2,3,4,5};
  ```

- `spiralOrder(数组)`：用于顺时针打印螺旋矩阵

## 逻辑运算符

- 短路与`&&`、短路或`||`：先看第一个元素
- 逻辑与`&`、逻辑或`|`
- 按位运算符：与`&`、或`|`、非`~`、异或`^`
- 自增自减在前是先操作再赋值

## 执行控制流程

- switch语句的简洁写法不需要写`break`，且可以使用`yield()`方法执行新线程

- switch支持String，但不支持Long，因为初衷是判断简单的少数值

  ```java
  public class Main {
      public static void main(String[] args) {
          String fruit = "orange";
          int opt = switch (fruit) {
              // case "apple":
                  // 执行语句;
                  // break;
              case "apple" -> 1;
              case "pear", "mango" -> 2;
              default -> {
                  int code = fruit.hashCode();
                  yield code; // switch语句返回值
              }
          };
          System.out.println("opt = " + opt);
      }
  }
  ```

- return也可终止循环，但循环体后的语句不会执行
  
- break和continue后可加标签，相当于goto，用于跳出多重循环
  
- 实用小算法：有两个集合分别代表男和女，如果减少匹配夫妻次数
  
  1. 双重循环
  2. 双重循环，但是找到后就break
  3. 双重循环，但是找到后就break，并将匹配的移除(最坏复杂度仍很高)
  4. 不用for循环，for循环是通过共性来执行代码，使用HashMap，将女生的id作为key，男生只需要找key就行
